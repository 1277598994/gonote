## 前言

购买服务器处理选择配置（CPU、内存、存储）外，另外一个重点就是带宽的选择，1M,5M,10M,20M等等不知道如何选择，一方面宽带过大造成资源的浪费，也浪费金钱，宽带过小，
影响用户等待时间，降低用户体验。本文介绍根据网站并发量、IP、PV、网页大小等方面估算服务器宽带，另外还会介绍共享宽带和独享宽带的区别。

## 服务器宽带单位换算

Byte(字节)和bit(比特):一般情况下，我们用大写B代表Byte(字节)，小写的b代表bit(比特)； 1Byte=8bit。
当我们看到主机商宣称的带宽前，要搞清楚是Byte还是bit,因为二者相差8！一般来讲，机房主机端口宽带使用的是bit（比特）,所以，1M宽带（1Mbps）的下载峰值并不是1M/秒，
要除以8。 综上：

```
1M宽带（1Mbps）所对应的下载峰值为128KB/s（128KBps）
2M宽带（2Mbps）所对应的下载峰值就是128k*2=256KB/s
```

##  共享带宽的独享带宽的区别

我们以100共享带宽的10M独享带宽为例：

*共享带宽*：多个用户共享100宽带（多少个用户共享呢）,如果用户数很多会导致并发数大，高峰时段就会出现争抢资源的现象。所以共享带宽的缺点是并发数抢资源时可能会被分配
的带宽很小，但共享带宽也有一个以偶点就是当不抢资源时你使用的带宽较大。所以如果使用共享带宽，单用户的带宽是浮动的。

*独享带宽*：不管你用多少带宽，都固定分配这个10M的带宽给你，任何时候都可以保证你有128*10=1280KB/s的最高下载速度。

注意：服务器带宽还取决于整个机房的带宽，假设机房给了你100M的端口，但是机房到公网的出口实际上只有10M,那么其实你的最大带宽也就是10M而已，所以请警惕，不要被无良主机
商欺骗。


## 宽带如何选择

说了这么多，那么宽带到底如何选择多少，如何估算？我们通过IP、PV、页面大小、并发量来估算合适的宽带值。

IP、PV 仅仅起到参考的作用，宽带峰值要重点参考并发量，因为假设每天有5000IP的网站，同事在线人数峰值可能为5000IP,但是这1000IP不可能同时占用宽带，可能1000IP对应
100个并发量。

另外网站类型对宽带影响非常大！例如：小说文字类的网站页面小，所以占用宽带低；图片和视频类网站内容大，哪怕没有多少PV，占用的宽带也多。

### 宽带估算

举例：

```
假设平均网站每个页面大小为30KB，网站同时在线人数峰值为1000人，假设十分之一的并发量即100人（假设1000个IP在线，并发峰值为100个），那么我们需要的带宽峰值为：
30KB*100=3000KB，大约为3M，我们希望网速快一些，这100并发产生的3M流量在1s内完成，所以
3M*8=24M宽带
什么？100个并发就需要24M宽带？要这么多？因为我们假设这100个并发请求流量在1s内完成，稍微延长时间，宽带值也可以降低。
```

注意：我们假设的页面值仅供参考，因为浏览器都会缓存页面，很多元素是不会重复计算流量的，另外还可以通过gzip(过时了吧)等方式降低流量占用。
